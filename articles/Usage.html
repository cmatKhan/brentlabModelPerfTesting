<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="brentlabModelPerfTesting">
<title>Usage • brentlabModelPerfTesting</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.2.2/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.2.2/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Usage">
<meta property="og:description" content="brentlabModelPerfTesting">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">brentlabModelPerfTesting</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.0.0.9000</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="active nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/Usage.html">Usage</a>
    <a class="dropdown-item" href="../articles/Using_Package_Data.html">Using_Package_Data</a>
    <a class="dropdown-item" href="../articles/fully_featured_R_package_development.html">fully_featured_R_package_development</a>
    <a class="dropdown-item" href="../articles/performance_testing_xgboost_on_htcf.html">performance_testing_xgboost_on_htcf</a>
  </div>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav"></ul>
</div>

    
  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>Usage</h1>
            
      
      
      <div class="d-none name"><code>Usage.Rmd</code></div>
    </div>

    
    
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://cmatkhan.github.io/brentlabModelPerfTesting/">brentlabModelPerfTesting</a></span><span class="op">)</span></span></code></pre></div>
<div class="section level2">
<h2 id="testing-a-single-model">Testing a Single Model<a class="anchor" aria-label="anchor" href="#testing-a-single-model"></a>
</h2>
<p><strong>note</strong>: interestingly, when R initially launches, it
will use all available CPUs. However, on the CPUs, over the course of
the execution, if it is long enough, you’ll notice that the usage goes
down to only the number of CPUs that you assign the XGboost command.</p>
<div class="section level3">
<h3 id="cmd-line-interface">Cmd line interface<a class="anchor" aria-label="anchor" href="#cmd-line-interface"></a>
</h3>
<p>Unfortunately, unlike python, R doesn’t have as easy of a way to set
up a cmd line interface to an R package automatically (eg, it isn’t
straight forward to have you install brentlabModelPerfTesting, and then
on the command line do something like
<code>$ brentlabModelPerfTesting perf_test</code>. With python this is
quite simple).</p>
<p>This likely reflects the major use case of R, which is for
interactive data exploration.</p>
<p>But, there is a cmd line interface to this package – you just have to
extract it.</p>
<p>There are many ways of doing this. The most recognizable to most
users would be:</p>
<ul>
<li><p>Install the package. To install this ‘normally’, we’d use
<code>remotes::install_github</code>. <strong><em>But</em></strong>,
this package has a system dependency – it requires a
<strong>linux</strong> system.</p></li>
<li><p>If you don’t have a <strong>linux</strong> system, not to fear!
you can use singularity or docker.</p></li>
</ul>
<p>I am going to continue this tutorial using <code>singularity</code>
on a HPC which runs Ubuntu 20.04. However, this is not required – you
can install this through R if you’re on linux, or you could use
docker.</p>
</div>
</div>
<div class="section level2">
<h2 id="pull-the-image">Pull the image<a class="anchor" aria-label="anchor" href="#pull-the-image"></a>
</h2>
<p>Singularity can pull and build docker images.</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="co"># cd into your scratch space, make a directory for this project if you wish</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a><span class="fu">mkdir</span> /scratch/<span class="op">&lt;</span>lab<span class="op">&gt;</span>/<span class="va">$USER</span>/xgboost_testing</span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a><span class="bu">cd</span> /scratch/<span class="op">&lt;</span>lab<span class="op">&gt;</span>/<span class="va">$USER</span>/xgboost_testing</span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a><span class="co"># enter an interactive session</span></span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a><span class="ex">interactive</span></span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-8"><a href="#cb2-8" aria-hidden="true" tabindex="-1"></a><span class="co"># load singularity. make sure it is reasonably up to date</span></span>
<span id="cb2-9"><a href="#cb2-9" aria-hidden="true" tabindex="-1"></a><span class="bu">eval</span> <span class="va">$(</span><span class="ex">spack</span> load <span class="at">--sh</span> singularityce@3.8.0<span class="va">)</span></span>
<span id="cb2-10"><a href="#cb2-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-11"><a href="#cb2-11" aria-hidden="true" tabindex="-1"></a><span class="co"># pull the image</span></span>
<span id="cb2-12"><a href="#cb2-12" aria-hidden="true" tabindex="-1"></a><span class="ex">singularity</span> pull docker://cmatkhan/brentlabxgboost:latest</span></code></pre></div>
<p>Next, we want to extract the cmd line scrpit out of the package.
We’re going to do this by entering the container interactively. To
launch an interactive shell, I use the following script. Copy this into
a file – I call it <code>singularity_shell.sh</code> – and make it
executable (eg <code>chmod +x singularity_shell.sh</code>)</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="co">#!/bin/bash</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a><span class="va">img</span><span class="op">=</span><span class="va">$1</span></span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a><span class="co"># replace &lt;LAB&gt; with the </span></span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a><span class="co"># correct lab name!</span></span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true" tabindex="-1"></a><span class="co"># </span><span class="al">NOTE</span><span class="co">: change the `-B` paths as appropriate for your use</span></span>
<span id="cb3-8"><a href="#cb3-8" aria-hidden="true" tabindex="-1"></a><span class="ex">singularity</span> shell <span class="dt">\</span></span>
<span id="cb3-9"><a href="#cb3-9" aria-hidden="true" tabindex="-1"></a>  <span class="at">-B</span> /scratch/<span class="op">&lt;</span>LAB<span class="op">&gt;</span>/<span class="va">$USER</span> <span class="dt">\</span></span>
<span id="cb3-10"><a href="#cb3-10" aria-hidden="true" tabindex="-1"></a>  <span class="at">-B</span> /ref/<span class="op">&lt;</span>LAB<span class="op">&gt;</span>/data <span class="dt">\</span></span>
<span id="cb3-11"><a href="#cb3-11" aria-hidden="true" tabindex="-1"></a>  <span class="at">-B</span> <span class="st">"</span><span class="va">$PWD</span><span class="st">"</span> <span class="dt">\</span></span>
<span id="cb3-12"><a href="#cb3-12" aria-hidden="true" tabindex="-1"></a>  <span class="va">$img</span></span></code></pre></div>
<p>Finally, we can enter the container.</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="ex">./singularity_shell.sh</span> /path/to/brentlabxgboost_latest.sif</span></code></pre></div>
<p>Once you’re in the container, launch an R interaction session like
this:</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> R</span></code></pre></div>
<p>And once in the R session, do this:</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://cmatkhan.github.io/brentlabModelPerfTesting/">brentlabModelPerfTesting</a></span><span class="op">)</span></span>
<span></span>
<span><span class="va">cmd_line_script</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span></span>
<span>  <span class="st">'xgboost_pref_testing.R'</span>, </span>
<span>  package <span class="op">=</span> <span class="st">'brentlabModelPerfTesting'</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># name of the file on your machine is arbitrary -- you choose</span></span>
<span><span class="co"># NOTE! this assumes that your $PWD is bound in the container </span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/files.html" class="external-link">file.copy</a></span><span class="op">(</span><span class="va">cmd_line_script</span>,<span class="st">"./brentlabModelPerfTesting_perf.R"</span><span class="op">)</span></span></code></pre></div>
<p>Exit the singularity container with <code>cntrl-d</code></p>
<p>Now, exit your <code>interactive</code> session – we are going to
request another interactive session with more resources in order to do
this initial round of interactive testing.</p>
<ul>
<li>
<strong>NOTE</strong>: this is a <strong>large</strong> request on a
<strong>shared</strong> system. The interactive node is meant for
<strong>testing</strong> prior to submission to the scheduler.
<strong><em>This is not your personal computer</em></strong>. Use any
cluster respectfully and sparingly, and everyone’s jobs will run faster.
In particular, do not request this and sit on the resources while you
screw around, go to lunch, or whatever else it is that you’re doing that
is not using the resources you’re hoarding.</li>
</ul>
<p>Request some number of cpus (12 or less is more than enough for this)
and 1 gpu. This is the command I use:</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="ex">srun</span> <span class="at">--mem</span><span class="op">=</span>30G <span class="at">--cpus-per-task</span><span class="op">=</span>12 <span class="at">--gpus</span><span class="op">=</span>1 <span class="at">-J</span> perf_testing <span class="at">-p</span> gpu <span class="at">--pty</span> /bin/bash <span class="at">-l</span></span></code></pre></div>
<p>Ensure that singularity is loaded in this session. Also load
<code>htop</code> – this isn’t strictly necessary as you should be able
to use <code>top</code> without doing anything. But <code>htop</code> is
a prettier output:</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="bu">eval</span> <span class="va">$(</span><span class="ex">spack</span> load <span class="at">--sh</span> singularityce@3.8.0<span class="va">)</span></span></code></pre></div>
<p>Like above, we’re going to use a generalized singularity script.
<strong><em>But</em></strong>, this one executes a cmd in a container,
rather than launching an interactive session.</p>
<p>I save the following as <code>singularity_exec_gpu.sh</code>. Make
sure when you create this, you make it executable
(<code>chmod +x singularity_exec_gpu.sh</code> and launch it with
<code>singularity_exec_gpu.sh /path/to/image.sif "path/to/run_cmd.&lt;ext&gt;"</code></p>
<div class="sourceCode" id="cb9"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="co">#!/bin/bash</span></span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a><span class="va">img</span><span class="op">=</span><span class="va">$1</span></span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-5"><a href="#cb9-5" aria-hidden="true" tabindex="-1"></a><span class="va">run_cmd</span><span class="op">=</span><span class="va">$2</span></span>
<span id="cb9-6"><a href="#cb9-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-7"><a href="#cb9-7" aria-hidden="true" tabindex="-1"></a><span class="co"># MAKE SURE YOU FILL IN</span></span>
<span id="cb9-8"><a href="#cb9-8" aria-hidden="true" tabindex="-1"></a><span class="co"># &lt;LAB&gt; YOURSELF!</span></span>
<span id="cb9-9"><a href="#cb9-9" aria-hidden="true" tabindex="-1"></a><span class="ex">singularity</span> exec <span class="dt">\</span></span>
<span id="cb9-10"><a href="#cb9-10" aria-hidden="true" tabindex="-1"></a>  <span class="at">--nv</span> <span class="dt">\</span></span>
<span id="cb9-11"><a href="#cb9-11" aria-hidden="true" tabindex="-1"></a>  <span class="at">-B</span> /scratch/<span class="op">&lt;</span>LAB<span class="op">&gt;</span>/<span class="va">$USER</span> <span class="dt">\</span></span>
<span id="cb9-12"><a href="#cb9-12" aria-hidden="true" tabindex="-1"></a>  <span class="at">-B</span> /ref/<span class="op">&lt;</span>LAB<span class="op">&gt;</span>/data <span class="dt">\</span></span>
<span id="cb9-13"><a href="#cb9-13" aria-hidden="true" tabindex="-1"></a>  <span class="at">-B</span> <span class="st">"</span><span class="va">$PWD</span><span class="st">"</span> <span class="dt">\</span></span>
<span id="cb9-14"><a href="#cb9-14" aria-hidden="true" tabindex="-1"></a>  <span class="va">$img</span> <span class="dt">\</span></span>
<span id="cb9-15"><a href="#cb9-15" aria-hidden="true" tabindex="-1"></a>  /bin/bash <span class="at">-c</span> <span class="st">"cd </span><span class="va">$PWD</span><span class="st">; </span><span class="va">$run_cmd</span><span class="st">"</span></span></code></pre></div>
<p>Now, the fun part. You can do some performance testing using the cmd
line script from brentlabModelPerfTesting. First, let’s make sure the
script will execute</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="ex">./scripts/singularity_exec_gpu.sh</span> software/brentlabxgboost_latest.sif <span class="st">"./your_machine/brentlabModelPerfTesting_perf.R --help"</span></span></code></pre></div>
<p>Note that there may be some singularity warnings. You can almost
certainly ignore those, though if you know how to address the underlay
bind mount warning, I’d be curious.</p>
<p>Output of the above cmd is:</p>
<pre class="raw"><code>Singularity&gt; ./xgboost_testing/brentlabModelPerfTesting/inst/xgboost_pref_testing.R --help
Usage: ./xgboost_testing/brentlabModelPerfTesting/inst/xgboost_pref_testing.R [options]


Options:
    -h, --help
        Show this help message and exit

    -v, --verbose
        Print extra output [default]

    --input=/PATH/TO/INPUT.RDS
        you do not have to set this to use the brentlabModelPerfTesting package test data. This default data is a 1300 x 81822. default label_colname, see below, is set to default to the appropriate response label for this data. Otherwise, set a path to a rds file of a data.frame where the first column is an expression vector the rest of the columns are snp vectors. rows are samples

    --label_colname=ENSG00000183117_19
        name of the column in the input data to use as the response vector. Default is  set for the default package input data

    -g, --gpu
        set --gpu to use the gpu_hist method. otherwise, cpu

    --cpu=5
        number of threads. Ignored if --gpu is set

    --rounds=10
        xgboost rounds parameter

    --max_bin=10
        xgboost max_bin parameter

    --max_depth=10
        xgboost max_depth parameter

    --num_features=-1
        number of features to include. Default is -1, which will include all avail

    --out
        set --out to write a csv with the performance time and memory results

    --prefix=''
        prefix to append to results. Default is none. if --out is set, set --prefix to some string to add something,  eg param_10_10_2_result.csv</code></pre>
<p>What this means is that to execute this using preconfigured values
for the CPU and data that is available in
<code>brentlabModelPerfTesting</code>, you just need to execute the
script.</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="ex">./scripts/singularity_exec_gpu.sh</span> software/brentlabxgboost_latest.sif <span class="st">"./relative/path/to/brentlabModelPerfTesting_perf.R"</span> <span class="kw">&amp;</span></span></code></pre></div>
<p>The output will be something like:</p>
<pre class="raw"><code>Singularity&gt; ./xgboost_testing/brentlabModelPerfTesting/inst/xgboost_pref_testing.R
  time_sec model_ram_mb total_mem_used_gb
1 3.263443          2.5                 1</code></pre>
<p><code>time_sec</code> tells you how long <strong>only the modelling
step</strong>_ (not data loading, etc) takes. The memory output should
be taken as ballpark – it will be better to do actual resource usage
testing using this on single models through <code>SLURM</code>.</p>
<p>But, this is sort of boring. Let’s increase the number of CPUs and
then use <code>htop</code> to see what it is doing.</p>
<p>Submit a command like the following – make sure you use
<code>&amp;</code> to send it to the background! – and then launch
<code>htop</code> (or <code>top</code>) to watch how this command
actually uses the resources on the node:</p>
<pre class="raw"><code># make sure the &amp; is there to submit to the background
./scripts/singularity_exec_gpu.sh software/brentlabxgboost_latest.sif "./relative/path/to/brentlabModelPerfTesting_perf.R --cpus 11 --rounds 100" &amp;</code></pre>
<p>It is going to take a minute (probably a bit less) to get going –
just wait. Eventually, you’ll see the available CPUs light up as R
starts executing your job.</p>
<p>Hit <code>q</code> to quit <code>htop</code>. To do the same thing,
but using the <code>GPU</code> instead, you’ll want to significantly
increase the number of rounds. The GPU executes <em>FAST</em>!</p>
<div class="sourceCode" id="cb15"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="ex">./scripts/singularity_exec_gpu.sh</span> software/brentlabxgboost_latest.sif <span class="st">"./relative/path/to/brentlabModelPerfTesting_perf.R --gpu --rounds 1000"</span> <span class="kw">&amp;</span></span></code></pre></div>
<p>Watch the load on the GPU – note that on our system (HTCF), for some
reason loading <code>singularity</code> interferes with
<code>watch</code>. If you can figure out how to get around that, then
yo could do update the view of the GPU every half second:</p>
<div class="sourceCode" id="cb16"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="ex">watch</span> <span class="at">-n</span> 0.5 nvidia-smi</span></code></pre></div>
<p>But, on our system it is likely going to be easier to just manually
resubmit this command throughout the execution. I suppose one thing you
might to is echo it into a file to keep a trace of the execution, if
you’re interested.</p>
<pre class="raw"><code><span><span class="va">nvidia</span><span class="op">-</span><span class="va">smi</span></span></code></pre>
<p>The <code>nvidia-smi</code> output looks like this</p>
<pre class="raw"><code>+-----------------------------------------------------------------------------+
| Processes:                                                                  |
|  GPU   GI   CI        PID   Type   Process name                  GPU Memory |
|        ID   ID                                                   Usage      |
|=============================================================================|
|    0   N/A  N/A    947887      C   /usr/lib/R/bin/exec/R            2932MiB |
+-----------------------------------------------------------------------------+
[chasem@n097 chasem]$ nvidia-smi
Wed Feb 15 08:55:20 2023       
+-----------------------------------------------------------------------------+
| NVIDIA-SMI 525.60.13    Driver Version: 525.60.13    CUDA Version: 12.0     |
|-------------------------------+----------------------+----------------------+
| GPU  Name        Persistence-M| Bus-Id        Disp.A | Volatile Uncorr. ECC |
| Fan  Temp  Perf  Pwr:Usage/Cap|         Memory-Usage | GPU-Util  Compute M. |
|                               |                      |               MIG M. |
|===============================+======================+======================|
|   0  NVIDIA A100 80G...  Off  | 00000000:98:00.0 Off |                    0 |
| N/A   49C    P0   174W / 300W |   2935MiB / 81920MiB |     96%      Default |
|                               |                      |             Disabled |
+-------------------------------+----------------------+----------------------+
</code></pre>
<p>If you toggle between the nvidia-smi and htop (maybe do this in a
<code>screen</code> session and split your terminal), you’ll notice that
the <code>GPU</code> goes up to 100% and makes use of 1 CPU.</p>
<div class="section level3">
<h3 id="interactive-r-session">Interactive R session<a class="anchor" aria-label="anchor" href="#interactive-r-session"></a>
</h3>
<p>You can also do this testing in an interactive R session. It is
essentially the same:</p>
<ul>
<li>install the package</li>
<li>launch an interactive session (probably in Rstudio)</li>
<li><code><a href="https://cmatkhan.github.io/brentlabModelPerfTesting/">library(brentlabModelPerfTesting)</a></code></li>
</ul>
<p>There are two functions available right now – you can read about them
<a href="">here</a>, and you can get documentation by doing
<code><a href="../reference/prep_data.html">?prep_data</a></code>. The examples will run – copy and paste them
into your console/script/notebook and execute. This package comes along
with the data, both a <em>very</em> small test set, and the full 1300
sample by ~82,000 SNP feature matrix. That is called
<code>gene_data_clean.rds</code>. All files in <a href="https://github.com/cmatKhan/brentlabModelPerfTesting/tree/main/inst" class="external-link">inst</a>
are available using the method you see above in extracting the cmd line
script, or in the function examples where I extract test data.</p>
</div>
<div class="section level3">
<h3 id="important">IMPORTANT<a class="anchor" aria-label="anchor" href="#important"></a>
</h3>
<p>When using the GPU in an interactive R session, it <em>does not</em>
automatically release the resources until you end/restart the session. I
don’t know why this is, but if you watch <code>nividia-smi</code>,
you’ll notice that your session process just sits on the GPU, even after
the execution completes. <code><a href="https://rdrr.io/r/base/gc.html" class="external-link">gc()</a></code> doesn’t clear it. I suspect
that it is <strong>far better</strong> to execute these types of jobs
via the cmd line/SBATCH.</p>
</div>
</div>
<div class="section level2">
<h2 id="submission-rate-testing">Submission rate testing<a class="anchor" aria-label="anchor" href="#submission-rate-testing"></a>
</h2>
<p>I’m just going to put my scripts in here. <strong><em>Please update
the bind paths, and any other paths</em></strong> to point at your own
directories/files rather than mine. Feel free to copy the singularity
image, of course.</p>
<div class="section level3">
<h3 id="typical-array-job">Typical array job<a class="anchor" aria-label="anchor" href="#typical-array-job"></a>
</h3>
<p>You can adapt the cmd line instructions above to do tihs differently,
but this is how I did the rate testing:</p>
<ol style="list-style-type: decimal">
<li>I used this script as a ‘template’:</li>
</ol>
<div class="sourceCode" id="cb19"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="co">#!/bin/bash</span></span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-3"><a href="#cb19-3" aria-hidden="true" tabindex="-1"></a><span class="co">#SBATCH --mem=10G</span></span>
<span id="cb19-4"><a href="#cb19-4" aria-hidden="true" tabindex="-1"></a><span class="co">#SBATCH --cpus-per-task=8</span></span>
<span id="cb19-5"><a href="#cb19-5" aria-hidden="true" tabindex="-1"></a><span class="co">#SBATCH --time=10</span></span>
<span id="cb19-6"><a href="#cb19-6" aria-hidden="true" tabindex="-1"></a><span class="co">#SBATCH --job-name=rate_testing</span></span>
<span id="cb19-7"><a href="#cb19-7" aria-hidden="true" tabindex="-1"></a><span class="co">#SBATCH --output=rate_testing.out</span></span>
<span id="cb19-8"><a href="#cb19-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-9"><a href="#cb19-9" aria-hidden="true" tabindex="-1"></a><span class="bu">eval</span> <span class="va">$(</span><span class="ex">spack</span> load <span class="at">--sh</span> singularityce@3.8.0<span class="va">)</span></span>
<span id="cb19-10"><a href="#cb19-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-11"><a href="#cb19-11" aria-hidden="true" tabindex="-1"></a><span class="va">singularity_image</span><span class="op">=</span><span class="va">$1</span></span>
<span id="cb19-12"><a href="#cb19-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-13"><a href="#cb19-13" aria-hidden="true" tabindex="-1"></a><span class="va">run_script</span><span class="op">=</span>/scratch/mblab/chasem/xgboost_testing/brentlabModelPerfTesting/inst/xgboost_pref_testing.R</span>
<span id="cb19-14"><a href="#cb19-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-15"><a href="#cb19-15" aria-hidden="true" tabindex="-1"></a><span class="co"># num_trees == rounds</span></span>
<span id="cb19-16"><a href="#cb19-16" aria-hidden="true" tabindex="-1"></a><span class="va">rounds</span><span class="op">=</span>10000</span>
<span id="cb19-17"><a href="#cb19-17" aria-hidden="true" tabindex="-1"></a><span class="co"># 256 is default</span></span>
<span id="cb19-18"><a href="#cb19-18" aria-hidden="true" tabindex="-1"></a><span class="va">max_bin</span><span class="op">=</span>256</span>
<span id="cb19-19"><a href="#cb19-19" aria-hidden="true" tabindex="-1"></a><span class="co"># default is 6</span></span>
<span id="cb19-20"><a href="#cb19-20" aria-hidden="true" tabindex="-1"></a><span class="va">max_depth</span><span class="op">=</span>2</span>
<span id="cb19-21"><a href="#cb19-21" aria-hidden="true" tabindex="-1"></a><span class="va">features</span><span class="op">=</span>10000</span>
<span id="cb19-22"><a href="#cb19-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-23"><a href="#cb19-23" aria-hidden="true" tabindex="-1"></a><span class="ex">singularity</span> exec <span class="dt">\</span></span>
<span id="cb19-24"><a href="#cb19-24" aria-hidden="true" tabindex="-1"></a>  <span class="at">-B</span> /scratch/mblab <span class="dt">\</span></span>
<span id="cb19-25"><a href="#cb19-25" aria-hidden="true" tabindex="-1"></a>  <span class="at">-B</span> <span class="st">"</span><span class="va">$PWD</span><span class="st">"</span> <span class="dt">\</span></span>
<span id="cb19-26"><a href="#cb19-26" aria-hidden="true" tabindex="-1"></a>  <span class="va">$singularity_image</span> <span class="dt">\</span></span>
<span id="cb19-27"><a href="#cb19-27" aria-hidden="true" tabindex="-1"></a>  /bin/bash <span class="at">-c</span> <span class="st">"cd </span><span class="va">$PWD</span><span class="st">; </span></span>
<span id="cb19-28"><a href="#cb19-28" aria-hidden="true" tabindex="-1"></a><span class="st"> </span><span class="va">$run_script</span><span class="st"> --cpu 7 --rounds </span><span class="va">$rounds</span><span class="st"> --max_bin </span><span class="va">$max_bin</span><span class="st"> --max_depth </span><span class="va">$max_depth</span><span class="st"> --num_features </span><span class="va">$features</span><span class="st">"</span></span></code></pre></div>
<p>And adjusted parameters as necessary, eg to run the <code>gpu</code>
testing, change the <code>SBATCH</code> resource requests to this:</p>
<div class="sourceCode" id="cb20"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="co">#SBATCH -p gpu</span></span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a><span class="co">#SBATCH -n 1</span></span>
<span id="cb20-3"><a href="#cb20-3" aria-hidden="true" tabindex="-1"></a><span class="co">#SBATCH --gpus=1</span></span>
<span id="cb20-4"><a href="#cb20-4" aria-hidden="true" tabindex="-1"></a><span class="co">#SBATCH --mem=10G</span></span>
<span id="cb20-5"><a href="#cb20-5" aria-hidden="true" tabindex="-1"></a><span class="co">#SBATCH --time=10</span></span>
<span id="cb20-6"><a href="#cb20-6" aria-hidden="true" tabindex="-1"></a><span class="co">#SBATCH --job-name=rate_testing_gpu</span></span>
<span id="cb20-7"><a href="#cb20-7" aria-hidden="true" tabindex="-1"></a><span class="co">#SBATCH --output=rate_testing_gpu.out</span></span></code></pre></div>
<p><strong><em>IMPORTANT</em></strong> and remember to set the
<code>--nv</code> flag in the singularity command, remove the
<code>--cpu</code> cmd from the brentlabxgboost cmd and add the
<code>--gpu</code> flag.</p>
<p>I submit these scripts to just run the same model over and over like
this:</p>
<div class="sourceCode" id="cb21"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a><span class="ex">sbatch</span> <span class="at">--array</span><span class="op">=</span>1-1000 /path/to/submit.sh /path/to/image.sif</span></code></pre></div>
</div>
<div class="section level3">
<h3 id="chunked-submission">Chunked submission<a class="anchor" aria-label="anchor" href="#chunked-submission"></a>
</h3>
<p>I did this with two scripts – the first sets up the singularity
environment, the second executes a bash loop to execute some number of
sequential tasks. Here are the scripts I used:</p>
<div class="section level4">
<h4 id="main-process">Main Process<a class="anchor" aria-label="anchor" href="#main-process"></a>
</h4>
<div class="sourceCode" id="cb22"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a><span class="co">#!/bin/bash</span></span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-3"><a href="#cb22-3" aria-hidden="true" tabindex="-1"></a><span class="co">#SBATCH -p gpu</span></span>
<span id="cb22-4"><a href="#cb22-4" aria-hidden="true" tabindex="-1"></a><span class="co">#SBATCH -n 1</span></span>
<span id="cb22-5"><a href="#cb22-5" aria-hidden="true" tabindex="-1"></a><span class="co">#SBATCH --gpus=1</span></span>
<span id="cb22-6"><a href="#cb22-6" aria-hidden="true" tabindex="-1"></a><span class="co">#SBATCH --mem=10G</span></span>
<span id="cb22-7"><a href="#cb22-7" aria-hidden="true" tabindex="-1"></a><span class="co">#SBATCH --time=10</span></span>
<span id="cb22-8"><a href="#cb22-8" aria-hidden="true" tabindex="-1"></a><span class="co">#SBATCH --job-name=rate_testing_gpu</span></span>
<span id="cb22-9"><a href="#cb22-9" aria-hidden="true" tabindex="-1"></a><span class="co">#SBATCH --output=rate_testing_gpu.out</span></span>
<span id="cb22-10"><a href="#cb22-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-11"><a href="#cb22-11" aria-hidden="true" tabindex="-1"></a><span class="bu">eval</span> <span class="va">$(</span><span class="ex">spack</span> load <span class="at">--sh</span> singularityce@3.8.0<span class="va">)</span></span>
<span id="cb22-12"><a href="#cb22-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-13"><a href="#cb22-13" aria-hidden="true" tabindex="-1"></a><span class="va">run_script</span><span class="op">=</span><span class="va">$1</span></span>
<span id="cb22-14"><a href="#cb22-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-15"><a href="#cb22-15" aria-hidden="true" tabindex="-1"></a><span class="va">singularity_image</span><span class="op">=</span><span class="va">$2</span></span>
<span id="cb22-16"><a href="#cb22-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-17"><a href="#cb22-17" aria-hidden="true" tabindex="-1"></a><span class="va">chunk_size</span><span class="op">=</span><span class="va">$3</span></span>
<span id="cb22-18"><a href="#cb22-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-19"><a href="#cb22-19" aria-hidden="true" tabindex="-1"></a><span class="ex">singularity</span> exec <span class="dt">\</span></span>
<span id="cb22-20"><a href="#cb22-20" aria-hidden="true" tabindex="-1"></a>  <span class="at">--nv</span> <span class="dt">\</span></span>
<span id="cb22-21"><a href="#cb22-21" aria-hidden="true" tabindex="-1"></a>  <span class="at">-B</span> /scratch/mblab <span class="dt">\</span></span>
<span id="cb22-22"><a href="#cb22-22" aria-hidden="true" tabindex="-1"></a>  <span class="at">-B</span> <span class="st">"</span><span class="va">$PWD</span><span class="st">"</span> <span class="dt">\</span></span>
<span id="cb22-23"><a href="#cb22-23" aria-hidden="true" tabindex="-1"></a>  <span class="va">$singularity_image</span> <span class="dt">\</span></span>
<span id="cb22-24"><a href="#cb22-24" aria-hidden="true" tabindex="-1"></a>  /bin/bash <span class="at">-c</span> <span class="st">"cd </span><span class="va">$PWD</span><span class="st">; </span><span class="va">$run_script</span><span class="st"> </span><span class="va">$chunk_size</span><span class="st"> </span><span class="va">$SLURM_ARRAY_TASK_ID</span><span class="st">"</span> </span></code></pre></div>
</div>
<div class="section level4">
<h4 id="chunk-runner">Chunk runner<a class="anchor" aria-label="anchor" href="#chunk-runner"></a>
</h4>
<div class="sourceCode" id="cb23"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a><span class="co">#!/bin/bash</span></span>
<span id="cb23-2"><a href="#cb23-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-3"><a href="#cb23-3" aria-hidden="true" tabindex="-1"></a><span class="co"># this is intended to wrap a single task' in the for loop.</span></span>
<span id="cb23-4"><a href="#cb23-4" aria-hidden="true" tabindex="-1"></a><span class="co"># the purpose is to control how many 'tasks' get executed </span></span>
<span id="cb23-5"><a href="#cb23-5" aria-hidden="true" tabindex="-1"></a><span class="co"># in a single resource requests.</span></span>
<span id="cb23-6"><a href="#cb23-6" aria-hidden="true" tabindex="-1"></a><span class="co"># for example, if you need to run 1000 tasks, and you want </span></span>
<span id="cb23-7"><a href="#cb23-7" aria-hidden="true" tabindex="-1"></a><span class="co"># to run 10 tasks sequentially per resource request, then </span></span>
<span id="cb23-8"><a href="#cb23-8" aria-hidden="true" tabindex="-1"></a><span class="co"># you would do:</span></span>
<span id="cb23-9"><a href="#cb23-9" aria-hidden="true" tabindex="-1"></a><span class="co">#</span></span>
<span id="cb23-10"><a href="#cb23-10" aria-hidden="true" tabindex="-1"></a><span class="co"># ./chunk_submission.sh 10 &lt;iteration number&gt;</span></span>
<span id="cb23-11"><a href="#cb23-11" aria-hidden="true" tabindex="-1"></a><span class="co"># </span></span>
<span id="cb23-12"><a href="#cb23-12" aria-hidden="true" tabindex="-1"></a><span class="co"># where &lt;iteration number&gt; comes from the parent sbatch </span></span>
<span id="cb23-13"><a href="#cb23-13" aria-hidden="true" tabindex="-1"></a><span class="co"># submission.</span></span>
<span id="cb23-14"><a href="#cb23-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-15"><a href="#cb23-15" aria-hidden="true" tabindex="-1"></a><span class="va">chunk_size</span><span class="op">=</span><span class="va">$1</span></span>
<span id="cb23-16"><a href="#cb23-16" aria-hidden="true" tabindex="-1"></a><span class="va">iteration_num</span><span class="op">=</span><span class="va">$2</span></span>
<span id="cb23-17"><a href="#cb23-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-18"><a href="#cb23-18" aria-hidden="true" tabindex="-1"></a><span class="va">run_script</span><span class="op">=</span>/scratch/mblab/chasem/xgboost_testing/brentlabModelPerfTesting/inst/xgboost_pref_testing.R</span>
<span id="cb23-19"><a href="#cb23-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-20"><a href="#cb23-20" aria-hidden="true" tabindex="-1"></a><span class="co"># num_trees == rounds</span></span>
<span id="cb23-21"><a href="#cb23-21" aria-hidden="true" tabindex="-1"></a><span class="va">rounds</span><span class="op">=</span>10000</span>
<span id="cb23-22"><a href="#cb23-22" aria-hidden="true" tabindex="-1"></a><span class="co"># 256 is default</span></span>
<span id="cb23-23"><a href="#cb23-23" aria-hidden="true" tabindex="-1"></a><span class="va">max_bin</span><span class="op">=</span>256</span>
<span id="cb23-24"><a href="#cb23-24" aria-hidden="true" tabindex="-1"></a><span class="co"># default is 6</span></span>
<span id="cb23-25"><a href="#cb23-25" aria-hidden="true" tabindex="-1"></a><span class="va">max_depth</span><span class="op">=</span>2</span>
<span id="cb23-26"><a href="#cb23-26" aria-hidden="true" tabindex="-1"></a><span class="va">features</span><span class="op">=</span>10000</span>
<span id="cb23-27"><a href="#cb23-27" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-28"><a href="#cb23-28" aria-hidden="true" tabindex="-1"></a><span class="va">START</span><span class="op">=</span><span class="va">$((</span> (<span class="va">$iteration_num</span> <span class="op">-</span> <span class="dv">1</span>) <span class="op">*</span> <span class="va">$chunk_size</span> <span class="op">+</span> <span class="dv">1</span><span class="va">))</span><span class="kw">;</span></span>
<span id="cb23-29"><a href="#cb23-29" aria-hidden="true" tabindex="-1"></a><span class="va">STOP</span><span class="op">=</span><span class="va">$((</span> <span class="va">$START</span> <span class="op">+</span> <span class="va">$chunk_size</span> <span class="op">-</span> <span class="dv">1</span> <span class="va">))</span><span class="kw">;</span></span>
<span id="cb23-30"><a href="#cb23-30" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-31"><a href="#cb23-31" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> line_num <span class="kw">in</span> <span class="va">$(</span> <span class="fu">seq</span> <span class="va">$START</span> <span class="va">$STOP</span> <span class="va">)</span><span class="kw">;</span> <span class="cf">do</span></span>
<span id="cb23-32"><a href="#cb23-32" aria-hidden="true" tabindex="-1"></a>    <span class="co">#echo $line_num </span></span>
<span id="cb23-33"><a href="#cb23-33" aria-hidden="true" tabindex="-1"></a>    <span class="va">$run_script</span> <span class="dt">\</span></span>
<span id="cb23-34"><a href="#cb23-34" aria-hidden="true" tabindex="-1"></a>        <span class="at">--gpu</span> <span class="dt">\</span></span>
<span id="cb23-35"><a href="#cb23-35" aria-hidden="true" tabindex="-1"></a>        <span class="at">--rounds</span> <span class="va">$rounds</span> <span class="dt">\</span></span>
<span id="cb23-36"><a href="#cb23-36" aria-hidden="true" tabindex="-1"></a>        <span class="at">--max_bin</span> <span class="va">$max_bin</span> <span class="dt">\</span></span>
<span id="cb23-37"><a href="#cb23-37" aria-hidden="true" tabindex="-1"></a>        <span class="at">--max_depth</span> <span class="va">$max_depth</span> <span class="dt">\</span></span>
<span id="cb23-38"><a href="#cb23-38" aria-hidden="true" tabindex="-1"></a>        <span class="at">--num_features</span> <span class="va">$features</span></span>
<span id="cb23-39"><a href="#cb23-39" aria-hidden="true" tabindex="-1"></a><span class="cf">done</span></span></code></pre></div>
</div>
</div>
</div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by Mateusiak Chase.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
